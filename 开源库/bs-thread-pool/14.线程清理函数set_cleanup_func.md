# 线程清理函数set_cleanup_func
```cpp
/**
* @brief 设置线程池的清理函数。
*
* @param cleanup 在每个线程被销毁之前运行的清理函数，这将在线程池被析构或重置时发生。该函数必须没有返回值，可以接受一个参数（`std::size_t`类型的线程索引）或零个参数。清理函数不得抛出任何异常，因为这将导致程序终止。任何异常都必须在函数内显式处理。
*/
template <BS_THREAD_POOL_INIT_FUNC_CONCEPT(F)>
void set_cleanup_func(F&& cleanup)
{
    if constexpr (std::is_invocable_v<F, std::size_t>)
    {
        cleanup_func = std::forward<F>(cleanup);
    }
    else
    {
        cleanup_func = [cleanup = std::forward<F>(cleanup)](std::size_t)
        {
            cleanup();
        };
    }
}
```

# 实现原理
1. **判断函数签名**：检查函数是否能接受 `std::size_t` 参数
2. **直接使用**：如果能接受参数，直接赋值给 `cleanup_func`
3. **Lambda包装**：如果不能接受参数，用lambda包装成统一格式
4. **调用时机**：在worker线程结束时调用清理函数

# 作用
- 线程结束前清理线程本地资源
- 支持带线程ID参数和无参数两种函数
- 必须保证不抛出异常