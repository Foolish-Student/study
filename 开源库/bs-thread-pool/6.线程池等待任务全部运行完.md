# 线程池等待任务全部运行完

## wait()函数实现
使用条件变量实现主线程等待所有任务完成：

```cpp
std::unique_lock tasks_lock(tasks_mutex);
waiting = true;  // 标记有线程在等待
tasks_done_cv.wait(tasks_lock,
    [this]
    {
        if constexpr (pause_enabled)
            return (tasks_running == 0) && (paused || tasks.empty());
        else
            return (tasks_running == 0) && tasks.empty();
    });
waiting = false;  // 清除等待标记
```

## 等待机制说明
- **等待条件**：当前运行任务数为0 且 任务队列为空时退出等待
- **线程协作**：worker线程在任务完成后检查等待条件，满足时调用`tasks_done_cv.notify_all()`唤醒等待线程
- **线程安全**：使用`unique_lock`保护共享状态，确保条件检查的原子性