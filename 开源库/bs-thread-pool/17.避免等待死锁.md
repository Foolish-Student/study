# 避免等待死锁
```cpp
if constexpr (wait_deadlock_checks_enabled)
{
    if (this_thread::get_pool() == this)
        throw wait_deadlock();
}
```


# 实现原理
1. **死锁检测**：在等待函数中检查当前线程是否属于同一个线程池
2. **条件判断**：`this_thread::get_pool() == this` 比较线程池指针
3. **异常抛出**：如果检测到死锁风险，抛出 `wait_deadlock` 异常
4. **编译期控制**：通过 `wait_deadlock_checks_enabled` 控制是否启用检测

# 死锁场景
```cpp
thread_pool pool;

pool.submit_task([]() {
    // 在工作线程中调用 wait() - 这会造成死锁！
    pool.wait();  // 工作线程等待自己完成任务
});
```

# 作用
- 防止工作线程调用 `wait()` 等待自己所在的线程池
- 提前发现潜在的死锁问题，避免程序挂起
- 只在启用死锁检测时生效