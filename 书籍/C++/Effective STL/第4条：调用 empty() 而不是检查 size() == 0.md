# 第4条：调用 `empty()` 而不是检查 `size() == 0`

## 🎯 核心观点

在判断 STL 容器是否为空时，**应优先使用 `empty()` 而不是 `size() == 0`**，因为：

1. **语义更清晰**
2. **更高效（对某些容器而言）**
3. **更通用，适用于所有标准容器**

---

## ✅ 推荐写法

```cpp
if (c.empty()) {
    // 更清晰、更安全
}
```

---

## ❌ 不推荐写法

```cpp
if (c.size() == 0) {
    // 可读性差，效率可能低
}
```

---

## 🛠 为什么 `empty()` 更高效？

对于某些容器（如 `list`, `map`），`size()` 可能是 **O(n)**：

* 早期 STL 实现中（特别是 pre-C++11），`list::size()` 并不缓存元素个数
* 每次调用都需要遍历整个链表来计数

而 `empty()` 通常只需判断头尾是否相等，或指针是否为空，**效率为 O(1)**，且在所有容器中都是常数时间。

---

## 📦 `empty()` 的额外优势

| 特性    | `empty()` ✅  | `size() == 0` ❌  |
| ----- | ------------ | ---------------- |
| 时间复杂度 | 恒定 O(1)      | 有的容器可能是 O(n)     |
| 可读性   | 语义清晰         | 逻辑性较弱            |
| 安全性   | 不涉及整数比较      | 容易出错或遗漏          |
| 泛型友好性 | 所有 STL 容器都支持 | 有些容器不推荐用 size 判断 |

---

## ✅ 实用建议

* 判断空容器时：**一律使用 `empty()`**
* 使用算法如 `while (!c.empty())` 替代 `while (c.size() > 0)`
* 写模板/泛型代码时也应优先使用 `empty()`，避免容器差异带来的 bug

---

## 📌 小结

> 使用 `empty()` 是更安全、更快、更 STL 风格的做法。
> 它不仅是性能优化的建议，也是代码风格和可维护性的体现。
