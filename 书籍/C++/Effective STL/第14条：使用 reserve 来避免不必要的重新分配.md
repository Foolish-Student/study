# 第 14 条：使用 `reserve` 来避免不必要的重新分配

### 📌 背景

* `vector` / `string` 都是动态数组实现。
* 当元素数目超过当前容量时，会 **重新分配更大内存** 并 **复制已有元素**。
* 多次扩容 → 频繁分配、复制 → 性能下降。

---

### 📌 `reserve` 的作用

* **`reserve(n)`**：一次性预留至少 `n` 个元素空间，不改变 `size()`。
* 避免反复扩容，显著减少内存分配和元素拷贝。

---

### 📌 区分 `reserve` 与 `resize`

* `reserve(n)`：只分配容量，不创建对象。
* `resize(n)`：真正改变元素个数，多出的部分会用默认值填充。

---

### 📌 使用场景

* 已知要插入大量数据：如读文件、批量构造字符串。
* 性能敏感时，预估所需容量，先 `reserve` 再插入。

---

### ✅ 总结

* **问题**：频繁扩容带来性能损耗。
* **措施**：用 `reserve` 预分配空间。
* **收益**：减少分配 + 拷贝，提高效率。
* **提醒**：合理估算容量，避免浪费内存。
