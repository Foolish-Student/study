# 第25条：熟悉非标准哈希容器

**核心思想**：除了 C++ 标准库提供的 `std::unordered_map` 和 `std::unordered_set`，在实际开发中，有许多高性能、功能更丰富的 **非标准哈希容器**，熟悉它们可以在性能关键场景下带来优势。

---

## 1️⃣ 常见非标准哈希容器

| 容器库                                                 | 说明                  | 特点              | 适用场景           |
| --------------------------------------------------- | ------------------- | --------------- | -------------- |
| **Google `dense_hash_map` / `sparse_hash_map`**     | Google 开源库提供的哈希表    | 高密度存储、内存利用率高    | 大量键值对且希望减少内存消耗 |
| **`absl::flat_hash_map` / `absl::node_hash_map`**   | Google Abseil 库     | 快速哈希、扁平结构优化缓存性能 | 高频访问、性能敏感      |
| **`boost::unordered_map` / `boost::unordered_set`** | Boost 库实现，兼容 C++ 标准 | 功能丰富、稳定         | 需要 Boost 功能扩展  |
| **`robin_hood::unordered_map`**                     | Robin Hood 哈希策略     | 查询和插入速度快，冲突少    | 高频随机访问场景       |
| **`ska::flat_hash_map`**                            | 高性能扁平哈希             | 缓存友好、内存占用低      | 大规模哈希表操作       |

---

## 2️⃣ 与标准容器对比

| 特性      | `std::unordered_map` | 非标准哈希容器                             |
| ------- | -------------------- | ----------------------------------- |
| 内存布局    | 链表 + 桶               | 扁平数组 / Robin Hood / open addressing |
| 内存效率    | 中等                   | 高（dense / flat）                     |
| 查询速度    | O(1) 平均              | 更快（缓存友好、冲突少）                        |
| 插入/删除速度 | O(1) 平均              | 高性能优化实现                             |
| 可用功能    | 基本哈希                 | 特殊优化：批量插入、迭代顺序、缓存优化                 |

---

## 3️⃣ 使用建议

1. **小规模或非性能关键场景**：使用标准库 `std::unordered_map` / `std::unordered_set` 即可，兼容性好。
2. **大规模、高性能场景**：

   * 考虑 `dense_hash_map` / `flat_hash_map` / `robin_hood` 等。
   * 注意内存初始化（比如 `max_load_factor`）和哈希函数。
3. **熟悉哈希策略差异**：

   * 链表法 vs 开放寻址法 vs Robin Hood
   * 冲突处理策略不同会影响性能。

---

**总结**：

> 在性能敏感或大数据场景下，熟悉非标准哈希容器可以显著提升查询与插入效率，同时降低内存开销。不要局限于 `std::unordered_map`，根据场景选择合适的哈希容器。
