# 1.容器
## 第一条：慎重选择容器类型

> **核心观点：同容器适用于不同场景，选对容器能极大提升程序性能和可维护性。**

---

### 🌲 容器分类与特点对比

| 容器类型            | 结构/特点                | 插入/删除效率           | 查找效率        | 是否排序 | 特别适合的场景         |
| --------------- | -------------------- | ----------------- | ----------- | ---- | --------------- |
| `vector`        | 连续数组，支持随机访问          | 尾部快 O(1)，中间慢 O(n) | 快速随机访问 O(1) | ❌ 无序 | 频繁随机访问，大量尾部操作   |
| `list`          | 双向链表                 | 任意位置快 O(1)        | 顺序查找 O(n)   | ❌ 无序 | 频繁插入删除，不需要随机访问  |
| `deque`         | 双端队列                 | 两端插入删除快 O(1)      | 快速随机访问 O(1) | ❌ 无序 | 双端插入删除          |
| `set`           | 红黑树实现，自动排序、唯一性       | 插入删除 O(log n)     | 查找 O(log n) | ✅ 有序 | 保证唯一、需要自动排序的数据集 |
| `multiset`      | 类似 `set`，允许重复 key    | 插入删除 O(log n)     | 查找 O(log n) | ✅ 有序 | 统计频次、允许重复元素     |
| `map`           | 键值对，按 key 排序，红黑树实现   | 插入删除 O(log n)     | 查找 O(log n) | ✅ 有序 | 有序映射，查找效率和排序兼顾  |
| `multimap`      | 类似 `map`，允许重复 key    | 插入删除 O(log n)     | 查找 O(log n) | ✅ 有序 | 一对多关系建模（如学生→成绩） |
| `unordered_set` | 哈希表实现，无序，唯一性         | 插入查找平均 O(1)       | 查找 O(1)（均摊） | ❌ 无序 | 快速查找、唯一值集合      |
| `unordered_map` | 类似 `map`，哈希表实现，无序    | 插入查找平均 O(1)       | 查找 O(1)（均摊） | ❌ 无序 | 快速键值映射查找        |
| `bitset`        | 固定长度的位数组（布尔值优化存储）    | 位运算快              | 逐位访问        | ❌ 无序 | 节省空间，处理布尔数组     |
| `rope`          | 平衡树结构的大字符串容器（GCC 扩展） | 插入删除快（中间也快）       | 支持子串操作      | ❌ 无序 | 编辑器、处理长字符串      |

---

### 🛠️ 建议与原则

1. **不要盲目使用 `vector`**：虽然常用，但中间插入删除效率差，不适合频繁修改的场景。
2. **`list` 适合频繁插入/删除，不适合查找**：无随机访问，查找效率低。
3. **使用 `set` / `map` 要知道它们是有序结构**：所有操作为 O(log n)，比 `unordered_*` 慢但有序。
4. **`unordered_*` 系列优于 `set` / `map` 速度快但无序**：适合查找频繁、无需排序。
5. **内存占用考虑**：`list` 由于链表结构，指针开销大；`vector` 更紧凑。

---

### 🔍 实战选择示例

| 需求场景           | 推荐容器                              |
| -------------- | --------------------------------- |
| 快速查找，不要求顺序     | `unordered_map` / `unordered_set` |
| 自动排序，不允许重复     | `set` / `map`                     |
| 需要频繁插入删除（非尾部）  | `list`                            |
| 需要快速随机访问，插入在尾部 | `vector`                          |
| 需要快速两端插入删除     | `deque`                           |
| 操作超长字符串、频繁拼接   | `rope`（非标准）                       |
| 节省布尔值空间        | `bitset`                          |

---

### 📌 小结

> STL 容器众多，各有所长。选择容器时不要凭感觉，而要：
>
> ✅ 明确操作模式 → ✅ 了解容器特性 → ✅ 选择合适容器

📖 正如本节标题所说：“**慎重选择容器类型**” —— 这是高质量 C++ 编程的第一步！

---
