# 第5条：优先使用范围成员函数而不是单元素操作

## 🎯 核心观点

在对 STL 容器执行批量插入、删除或赋值时，**应优先使用范围成员函数（range functions）**，如 `insert(first, last)`、`assign(first, last)`，而不是用循环多次调用单元素版本。这样做更高效、更简洁，也更符合 STL 的设计初衷。

---

## ✅ 推荐写法

```cpp
vector<int> v;
int arr[] = {1, 2, 3, 4, 5};

// 一次性插入整个范围
v.insert(v.begin(), arr, arr + 5);
```

---

## ❌ 不推荐写法

```cpp
vector<int> v;
int arr[] = {1, 2, 3, 4, 5};

// 循环逐个插入
for (int x : arr) {
    v.insert(v.begin(), x);
}
```

---

## 🛠 为什么范围操作更好？

1. **效率更高**：

   * 范围插入通常只触发 **一次内存分配/扩容**
   * 循环插入可能会导致多次扩容和位置重排

2. **代码更简洁**：

   * 一条语句就能完成，避免冗长循环

3. **更符合 STL 哲学**：

   * STL 的算法和容器接口本身就是 **面向范围（ranges）** 设计的

---

## 📦 范围函数的常见应用

| 操作目的 | 范围函数 ✅                     | 单元素 ❌                 |
| ---- | -------------------------- | --------------------- |
| 插入   | `insert(pos, first, last)` | 循环多次 `insert(pos, x)` |
| 赋值   | `assign(first, last)`      | 清空后逐个 `push_back(x)`  |
| 删除   | `erase(first, last)`       | 循环多次 `erase(pos)`     |

---

## ✅ 实用建议

* 在批量处理时，**一律优先选择范围函数**
* 如果你在写循环调用 `insert/erase/push_back`，很可能说明写法可以优化
* 范围函数不仅性能更好，还能让代码更具可读性和泛型友好性

---

## 📌 小结

**能用范围，就别用单元素！** 🚀
这样不仅让代码更优雅，还能避免隐藏的性能陷阱。
