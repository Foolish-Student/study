# 5.1 OpenAI中的 Functions（重点梳理）


---

## 一、Functions 在 OpenAI 里的定位

* 在 Assistants 里，工具大致分三类：

  * **Code interpreter**：跑代码做计算、画图等（OpenAI 内置）。
  * **File search**：在你上传的文件里自动检索内容（OpenAI 内置）。
  * **Functions**：**由开发者自定义的工具**，可以接外部系统、业务逻辑等。
* 前两种是“官方自带工具”，开关一下就能用；
  **Functions 则是你自己写的“外挂能力”，用来扩展大模型**。

一句话概括：

> Code interpreter / File search = 官方万能工具
> Functions = 你自己写的“专长技能”。

---

## 二、Functions 是什么，本质做什么用？

书里的定义可以简单理解为：

* **它是给开发者用的扩展插件接口**：

  * 让你可以定义“可调用的函数/服务”，比如查天气、查订单、下单交易、内部系统查询等。
* 这些函数可以：

  * **执行特定任务**（如“计算运费”“生成发票”）。
  * **处理复杂查询**（如“根据多个字段筛选客户”）。
  * **提供专业回答**（如“根据财报算出几个关键指标并解读”）。
* 大模型的角色：

  * 负责**理解自然语言 → 决定是否调用哪个函数 → 产出参数 JSON**。
  * 真正“干活”的，是你在后端实现的函数 / 接口。

书中类比：

> 像人会决定“什么时候用刀、什么时候用锤子”，
> **Agent 也会根据任务需要，通过 Functions 选合适的外部工具来用**，从而补全它自己训练中没有的技能。

---

## 三、Functions 的三个关键特性（要记）

书里给了三个关键词，很适合作为记忆点：

1. **定制化**：

   * 你可以针对某个业务场景写函数，比如“get_user_orders”“calculate_flower_price”。
   * 让模型在你的领域里表现得更像“行内人”。

2. **集成**：

   * 这些函数可以直接拼进你已有的系统或服务里（CRM、库存系统、支付系统等）。
   * 相当于是用大模型做“智能前端”，背后调用你现成的 API。

3. **扩展性**：

   * 以后业务变了、功能增加，只要**更新函数接口 & 实现**，模型自然能学会用新的工具。
   * 不需要重新训练大模型，只是扩充工具箱。

总结一句：

> Functions 让大模型**连上外部世界**，成为“会用你家业务系统的 AI 助理”，而不是只会聊天的机器人。

---

## 四、两个使用 Functions 时特别重要的点

### 1. Description（说明文字）极其重要

* 对于你自定义的 Function，**模型要不要用它、什么时候用它，很大程度看 Description**。
* 例子：官方示例函数 `get_weather` 的说明是

  > “Determine weather in my location”
  > 所以当用户问天气相关问题时，助手就会自然想到用这个工具。
* 实际落地要点：

  * 描述要**具体 + 明确**：写清“什么时候用它”“它能干嘛”。
  * 尽量用自然语言说明触发场景，比如：“当用户询问心情相关的鼓励话语时使用此函数”。

可以简单记：

> Description 就是“工具广告语 + 使用说明”，写好它 = 教会模型何时用这个函数。

### 2. Function 里的“代码”其实是 JSON Schema，不是实现代码

* Playground 里 Function 的那块“看起来像代码”的区域，实际是**JSON Schema**：

  * 描述函数名、功能说明、参数结构（type / properties / required）。
* 这一段扮演的是**“函数元数据”**的角色：

  * 告诉大模型：

    * 这个函数叫什么（name）
    * 是干什么的（description）
    * 需要哪些参数（parameters）
* 真正的函数实现代码，是你在后端自己写的；模型只负责根据对话内容，**产出一条 JSON 调用参数**，由你去执行。

---

## 总结一句方便记忆的版本

> **5.1 的核心就是一件事：Functions = 让大模型“会用你自己写的工具”。**
>
> * 它和 Code interpreter / File search 一起构成工具系统，但 Functions 是唯一一个**完全由开发者自定义的外部能力**。
> * 好好写 **Description + JSON Schema**，就等于教会模型：
>
>   * “你这个工具是干嘛的？”
>   * “什么时候应该找你干活，要带哪些参数？”
