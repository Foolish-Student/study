# 3350.检测相邻递增子数组 II


## 一、题目理解

题目要求我们找出一个整数 `k` 的 **最大值**，使得在数组 `nums` 中存在两个**相邻且长度为 `k` 的严格递增子数组**。

换句话说，必须同时满足以下条件：

1. `nums[a..a+k-1]` 和 `nums[b..b+k-1]` 都是严格递增的；
2. `b = a + k`，即第二个子数组紧接在第一个后面；
3. `k` 要尽可能大。

---

## 二、思路分析

### ✅ 1. 将问题转化为“连续递增长度”的分析

首先，我们需要识别出数组中连续递增的区间。例如：

```
nums = [2,5,7,8,9,2,3,4,3,1]
递增段： [2,5,7,8,9] 长度 5
        [2,3,4]      长度 3
```

可以看出：

* 第一段递增长度为 5；
* 第二段递增长度为 3；
* 这两段是相邻的（因为第二段从第一段的末尾开始）。

于是问题就变成了：

> **找到两个相邻递增区间的长度的最小值，并取这些最小值的最大值。**

也就是：

```
res = max( min(上一段长度, 当前段长度) )
```

---

### ✅ 2. 遍历统计递增长度

我们从头到尾遍历数组，使用两个变量：

* `cont`：记录当前递增段的长度；
* `percont`：记录上一段递增段的长度。

遍历时：

* 若 `nums[i] > nums[i - 1]`，当前递增段长度加一；
* 否则说明递增被打断，将 `percont` 更新为上一段长度，再重新开始统计新的递增段。

每当递增段被打断时，比较：

```
res = max(res, min(percont, cont))
```

代表两段相邻递增区间的最大可重叠长度。

---

### ✅ 3. 特殊情况的考虑

还要考虑在单一递增区间内部，是否可以拆成两个相邻的子段。例如：

```
nums = [1, 2, 3, 4]
```

这是一整段长度为 4 的递增区间，可以拆为两个长度为 `2` 的相邻递增子数组：

```
[1, 2] 和 [3, 4]
```

因此我们还需在遍历时额外考虑：

```
res = max(res, cont / 2)
```

即当一个长递增区间内部可拆分出两个相邻子段时的情况。

---

## 三、算法流程

1. 初始化：

   ```
   res = 0, cont = 1, percont = 0
   ```
2. 从第二个元素开始遍历：

   * 若 `nums[i] > nums[i - 1]` → `cont++`
   * 否则：

     * `percont = cont`
     * `cont = 1`
   * 每次更新结果：

     ```
     res = max(res, min(percont, cont))
     res = max(res, cont / 2)
     ```
3. 遍历结束，返回 `res`。

---

## 四、示例推导

### 示例 1

```
nums = [2,5,7,8,9,2,3,4,3,1]
```

* 第一段递增：[2,5,7,8,9] → 长度 5
* 第二段递增：[2,3,4] → 长度 3
  相邻两段的最小值为 min(5,3)=3 → 最大 k = 3 ✅

---

### 示例 2

```
nums = [1,2,3,4,4,4,4,5,6,7]
```

* 第一段递增：[1,2,3,4] → 长度 4
* 第二段递增：[4,5,6,7] → 长度 4
  两段不相邻，中间被相等值隔断。
  但每个连续段内部可以拆成 [1,2] 和 [3,4]，因此最大 k = 2 ✅

---

## 五、复杂度分析

| 项目    | 复杂度         |
| ----- | ----------- |
| 时间复杂度 | O(n)，只需一次遍历 |
| 空间复杂度 | O(1)，使用常量空间 |

---

## 六、总结

| 关键思想  | 说明                            |
| ----- | ----------------------------- |
| 递增段划分 | 将数组分割为多个严格递增区间                |
| 相邻匹配  | 比较相邻区间的最小长度取最大值               |
| 自身拆分  | 单个长区间可拆为两个较短子数组               |
| 综合判断  | 取 `max(min(前一段, 当前段), 当前段/2)` |

> 💡 简而言之：
> **本题是通过统计递增段长度，寻找可形成两个相邻递增子数组的最大长度 k。**
