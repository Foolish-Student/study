# JZ69 题解｜跳台阶（笔记＋题解思路）

## 题目概述

* **输入**：正整数 `n`（`1 ≤ n ≤ 40`）
* **规则**：一次可跳 `1` 级或 `2` 级
* **目标**：到达第 `n` 级的**不同跳法总数**（顺序不同视为不同）
* **复杂度要求**：时间 **O(n)**，空间 **O(1)**

---

## 一、问题本质与建模

把“到达第 `n` 级”的最后一步拆开看：

* **最后跳 1 级**：此前必须在 `n-1` 级，有 `f(n-1)` 种方法；
* **最后跳 2 级**：此前必须在 `n-2` 级，有 `f(n-2)` 种方法。

因此总数满足经典递推：

> **`f(n) = f(n-1) + f(n-2)`**，
> 边界：**`f(1) = 1`，`f(2) = 2`**

这就是“斐波那契型”转移（与标准 Fibonacci 的区别仅在初值）。
可直观理解为：每种方案的最后一步不是 1 就是 2，且两类互斥、覆盖全部。

---

## 二、解法路线（从易到优）

### 1）递归（不推荐）

直接按定义递归会重复子问题，时间复杂度 **O(2^n)**，不满足要求。

### 2）记忆化 / DP 表（可过）

自顶向下加缓存或自底向上填表，把时间降到 **O(n)**；
但存整张表需要 **O(n)** 额外空间。

### 3）滚动变量（推荐，满足进阶）

观察转移只依赖前两项：
用两个滚动量维护 `f(n-1)` 与 `f(n-2)`，再求 `f(n)`，边走边更新。

* **时间**：`O(n)`
* **空间**：`O(1)`（常数额外变量）

> 这正是你代码采取的做法：用 `last1 = f(i-1)`, `last2 = f(i-2)` 每轮迭代得到 `sum = f(i)`，再滚动更新。

---

## 三、与 Fibonacci 的关系

若令标准斐波那契 `Fib(1)=1, Fib(2)=1`，则本题的
**`f(n) = Fib(n+1)`**。
例如：`f(7)=21 = Fib(8)`；`f(40)=Fib(41)=165580141`，在 32 位整型范围内，安全。

---

## 四、复杂度分析

* **时间**：线性一次循环 → **O(n)**
* **空间**：仅常数个变量 → **O(1)**

---

## 五、样例推演

以 `n=7` 为例（列出序列）：

```
f(1)=1
f(2)=2
f(3)=3   (2+1)
f(4)=5   (3+2)
f(5)=8   (5+3)
f(6)=13  (8+5)
f(7)=21  (13+8)  ← 答案
```

与题目样例一致。

---

## 六、边界与坑点

* **`n=1`**：答案为 1，需单独处理或正确初始化循环。
* **递归超时**：裸递归会 TLE，面试/笔试里需说明并给出 DP/滚动变量。
* **整型溢出**：本题 `n≤40`，`int` 足够；若扩到更大（如 `n≈90`），应改用 `long long` 或大整数。

---

## 七、一页纸总结

* **建模**：到达 `n` 的最后一步来自 `n-1` 或 `n-2`
* **转移**：`f(n)=f(n-1)+f(n-2)`；`f(1)=1, f(2)=2`
* **实现**：滚动变量两项即可，时间 **O(n)**，空间 **O(1)**
* **认知锚点**：这是“斐波那契型”计数问题，`f(n)=Fib(n+1)`。

> 牢记：**能滚动，就不填表；能线性，就不递归。**
